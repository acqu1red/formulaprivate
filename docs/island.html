<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–û—Å—Ç—Ä–æ–≤ –∑–Ω–∞–Ω–∏–π - –§–æ—Ä–º—É–ª–∞</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <!-- Three.js CDN with proper version -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  
  <!-- OrbitControls for camera control -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  
  <!-- GLTFLoader for 3D models -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="island.css" />
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen">
    <div class="loading-content">
      <div class="loading-logo">üèùÔ∏è</div>
      <div class="loading-title">–û–°–¢–†–û–í –ó–ù–ê–ù–ò–ô</div>
      <div class="loading-subtitle">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ 3D –º–∏—Ä–∞...</div>
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      <div class="loading-tips">
        <div class="tip">üí° –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–¥–∞–Ω–∏—è –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Ä–∞–∑–¥–µ–ª—ã</div>
        <div class="tip">üåä –î–≤–∏–≥–∞–π—Ç–µ –ø–∞–ª—å—Ü–µ–º –¥–ª—è –æ—Å–º–æ—Ç—Ä–∞ –æ—Å—Ç—Ä–æ–≤–∞</div>
        <div class="tip">üìö –ò–∑—É—á–∞–π—Ç–µ –∑–Ω–∞–Ω–∏—è –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ</div>
      </div>
      <div id="webglStatus" class="webgl-status">
        <div class="status-text">–ü—Ä–æ–≤–µ—Ä–∫–∞ WebGL...</div>
      </div>
    </div>
  </div>

  <!-- Main Island Interface -->
  <div id="overlayTop">
    <div class="islandTitle">–û–°–¢–†–û–í –ó–ù–ê–ù–ò–ô</div>
    <div class="subTitle">–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π 3D –º–∏—Ä –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—á–Ω–æ—Å—Ç–∏</div>
    <div class="island-stats">
      <div class="stat">
        <span class="stat-icon">üè†</span>
        <span class="stat-text">3 –∑–¥–∞–Ω–∏—è</span>
      </div>
      <div class="stat">
        <span class="stat-icon">üå¥</span>
        <span class="stat-text">5 –ø–∞–ª—å–º</span>
      </div>
      <div class="stat">
        <span class="stat-icon">üìö</span>
        <span class="stat-text">5 –∫–Ω–∏–≥</span>
      </div>
    </div>
  </div>

  <div id="canvasWrap">
    <canvas id="scene"></canvas>
    <!-- Fallback message if WebGL fails -->
    <div id="webglFallback" class="webgl-fallback hidden">
      <div class="fallback-content">
        <div class="fallback-icon">‚ö†Ô∏è</div>
        <div class="fallback-title">WebGL –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</div>
        <div class="fallback-text">–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3D –≥—Ä–∞—Ñ–∏–∫—É. –û–±–Ω–æ–≤–∏—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ.</div>
      </div>
    </div>
  </div>

  <!-- Enhanced House Labels -->
  <div id="houseLabels">
    <div class="house-label" id="support-label" style="display: none;">
      <div class="label-content">
        <div class="label-icon">üí¨</div>
        <div class="label-info">
          <div class="label-text">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
          <div class="label-desc">–ü—Ä—è–º–æ–µ –æ–±—â–µ–Ω–∏–µ —Å —ç–∫—Å–ø–µ—Ä—Ç–∞–º–∏</div>
          <div class="label-features">
            <span class="feature">24/7</span>
            <span class="feature">–≠–∫—Å–ø–µ—Ä—Ç—ã</span>
            <span class="feature">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</span>
          </div>
        </div>
      </div>
    </div>
    <div class="house-label" id="materials-label" style="display: none;">
      <div class="label-content">
        <div class="label-icon">üìö</div>
        <div class="label-info">
          <div class="label-text">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</div>
          <div class="label-desc">–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∑–Ω–∞–Ω–∏—è</div>
          <div class="label-features">
            <span class="feature">–≠–∫—Å–∫–ª—é–∑–∏–≤</span>
            <span class="feature">–ü—Ä–∞–∫—Ç–∏–∫–∞</span>
            <span class="feature">–¢–µ–æ—Ä–∏—è</span>
          </div>
        </div>
      </div>
    </div>
    <div class="house-label" id="psychotypes-label" style="display: none;">
      <div class="label-content">
        <div class="label-icon">üß†</div>
        <div class="label-info">
          <div class="label-text">–ü—Å–∏—Ö–æ—Ç–∏–ø—ã</div>
          <div class="label-desc">–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</div>
          <div class="label-features">
            <span class="feature">–ê–Ω–∞–ª–∏–∑</span>
            <span class="feature">–ü—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥</span>
            <span class="feature">–ü—Ä–∞–∫—Ç–∏–∫–∞</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Island Info Panel -->
  <div id="islandInfo" class="hidden">
    <div class="info-header">
      <div class="info-title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Å—Ç—Ä–æ–≤–µ</div>
      <button id="closeInfo" class="btn ghost">√ó</button>
    </div>
    <div class="info-content">
      <div class="info-section">
        <h3>üèùÔ∏è –ì–µ–æ–≥—Ä–∞—Ñ–∏—è</h3>
        <p>–û—Å—Ç—Ä–æ–≤ –∑–Ω–∞–Ω–∏–π —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ —Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏—Ö –≤–æ–¥–∞—Ö. –û–±—â–∞—è –ø–ª–æ—â–∞–¥—å —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–∫–æ–ª–æ 2.5 –∫–º¬≤. –û—Å—Ç—Ä–æ–≤ –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω—É—é —Ñ–æ—Ä–º—É —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –±—É—Ö—Ç –∏ —Å–∫–∞–ª–∏—Å—Ç—ã—Ö –º—ã—Å–æ–≤.</p>
      </div>
      <div class="info-section">
        <h3>üè† –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞</h3>
        <p>–ù–∞ –æ—Å—Ç—Ä–æ–≤–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–¥–∞–Ω–∏—è: –∫—É—Ä–æ—Ä—Ç–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å –Ω–∞ –∑–∞–ø–∞–¥–µ, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä –Ω–∞ –≤–æ—Å—Ç–æ–∫–µ.</p>
      </div>
      <div class="info-section">
        <h3>üåø –ü—Ä–∏—Ä–æ–¥–∞</h3>
        <p>–û—Å—Ç—Ä–æ–≤ –ø–æ–∫—Ä—ã—Ç —Ç—Ä–æ–ø–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å –ø–∞–ª—å–º–∞–º–∏, –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∞–º–∏ –∏ —Ç—Ä–∞–≤–æ–π. –í–æ–∫—Ä—É–≥ –æ—Å—Ç—Ä–æ–≤–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –º–µ–ª–∫–∏–µ –æ—Å—Ç—Ä–æ–≤–∫–∏ –∏ –∫–æ—Ä–∞–ª–ª–æ–≤—ã–µ —Ä–∏—Ñ—ã.</p>
      </div>
    </div>
  </div>

  <!-- Interior overlay -->
  <div id="interiorOverlay" class="hidden">
    <div class="interior-header">
      <div class="interior-title">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–Ω–∞–Ω–∏–π</div>
      <div class="interior-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</div>
      <button id="closeInterior" class="btn ghost">√ó –ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div id="interiorCanvasWrap">
      <canvas id="interior"></canvas>
    </div>
    <div id="bookPanel" class="hidden">
      <div class="book-shelf">
        <div class="shelf-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–Ω–∏–≥—É –∑–Ω–∞–Ω–∏–π</div>
        <div class="shelf-subtitle">–ö–∞–∂–¥–∞—è –∫–Ω–∏–≥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑—É –ª–∏—á–Ω–æ—Å—Ç–∏</div>
        <div class="books-grid" id="booksGrid"></div>
      </div>
    </div>
  </div>

  <!-- Enhanced Book Reading Interface -->
  <div id="bookReader" class="hidden">
    <div class="book-header">
      <div class="book-info">
        <div class="book-title" id="bookReaderTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏</div>
        <div class="book-author" id="bookReaderAuthor">–ê–≤—Ç–æ—Ä</div>
      </div>
      <button id="closeBook" class="btn ghost">√ó –ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
    <div class="book-content">
      <div class="book-page" id="bookPage">
        <div class="page-content">
          <div class="book-cover">
            <div class="cover-title" id="coverTitle">–ü—Å–∏—Ö–æ—Ç–∏–ø—ã</div>
            <div class="cover-subtitle" id="coverSubtitle">–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</div>
            <div class="cover-author" id="coverAuthor">–§–û–†–ú–£–õ–ê</div>
            <div class="cover-decoration">
              <div class="decoration-line"></div>
              <div class="decoration-symbol">üß†</div>
              <div class="decoration-line"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="book-actions">
        <button class="btn primary" id="readInChannelBtn">
          <span class="btn-icon">üìñ</span>
          –ß–∏—Ç–∞—Ç—å –≤ –∫–∞–Ω–∞–ª–µ
        </button>
        <button class="btn secondary" id="bookmarkBtn">
          <span class="btn-icon">üîñ</span>
          –î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏
        </button>
      </div>
    </div>
  </div>

  <!-- Control Panel -->
  <div id="controlPanel">
    <button id="infoBtn" class="control-btn" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Å—Ç—Ä–æ–≤–µ">
      <span class="control-icon">‚ÑπÔ∏è</span>
    </button>
    <button id="resetViewBtn" class="control-btn" title="–°–±—Ä–æ—Å–∏—Ç—å –≤–∏–¥">
      <span class="control-icon">üîÑ</span>
    </button>
    <button id="fullscreenBtn" class="control-btn" title="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º">
      <span class="control-icon">‚õ∂</span>
    </button>
  </div>

  <!-- Enhanced Hint -->
  <div id="hint">
    <div class="hint-content">
      <span class="hint-icon">üí°</span>
      <span class="hint-text">–î–≤–∏–≥–∞–π—Ç–µ –ø–∞–ª—å—Ü–µ–º –¥–ª—è –æ—Å–º–æ—Ç—Ä–∞ ‚Ä¢ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–¥–∞–Ω–∏–µ –¥–ª—è –≤—Ö–æ–¥–∞</span>
    </div>
  </div>

  <!-- Progress Indicator -->
  <div id="progressIndicator" class="hidden">
    <div class="progress-content">
      <div class="progress-icon">üìö</div>
      <div class="progress-text">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–Ω–∞–Ω–∏–π...</div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>
  </div>

  <script src="island.js"></script>
</body>
</html>
