<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–¢–∞–π–Ω–∞—è –†—É–ª–µ—Ç–∫–∞</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Sora:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0a0a0a; --text:#fff; --muted:#aaa; --accent:#e2e8f0;
      --ring: rgba(255,255,255,.08); --ring-2: rgba(255,255,255,.2);
      --radius: 18px;
    }
    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      font-family:'Inter', system-ui; background: url('./assets/rulette/fon1.png') center/cover fixed no-repeat, linear-gradient(#000,#000);
      color:var(--text); min-height:100vh; overflow-x:hidden;
    }
    .overlay{ position:fixed; inset:0; pointer-events:none; background:radial-gradient(ellipse at 50% 35%, rgba(0,0,0,.2), rgba(0,0,0,.8)); }
    .chrome{ position:relative; padding:16px; display:flex; justify-content:space-between; align-items:center; }
    .back{ border:2px solid #fff; background:transparent; color:#fff; border-radius:999px; padding:8px 12px; cursor:pointer; }
    .title{ font-weight:700; text-shadow:0 0 14px rgba(255,255,255,.35); }

    .panel{
      margin:20px auto; max-width:980px; padding:20px; border:2px solid #fff; border-radius:var(--radius);
      background:rgba(0,0,0,.55); box-shadow:0 18px 45px rgba(0,0,0,.6), inset 0 0 50px rgba(255,255,255,.05);
      backdrop-filter: blur(14px);
    }

    .ring{
      position:relative; margin:20px auto; width:min(92vw,720px); height:180px; border-radius:16px; overflow:hidden;
      border:2px solid #fff; background:rgba(255,255,255,.06);
      box-shadow: inset 0 0 30px rgba(0,0,0,.5);
    }
    .ring .items{ position:absolute; inset:0; display:flex; align-items:center; gap:12px; padding:0 20px; transition: transform 10s ease-out; }
    .item{ min-width:120px; height:120px; border:2px solid #fff; border-radius:14px; display:flex; flex-direction:column; justify-content:center; align-items:center; background:rgba(255,255,255,.08); box-shadow:0 6px 14px rgba(0,0,0,.5); }
    .item .ico{ font-size:28px; margin-bottom:6px; filter: drop-shadow(0 2px 4px rgba(0,0,0,.7)); }
    .item .lbl{ font-size:12px; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.7); font-weight:700; text-align:center; }
    .pointer{ position:absolute; left:50%; top:-6px; transform:translateX(-50%); font-size:18px; text-shadow:0 0 16px rgba(255,255,255,.6); }

    .actions{ display:flex; justify-content:center; gap:12px; margin:16px 0; }
    .btn{ border:2px solid #fff; color:#000; background:#fff; padding:10px 16px; border-radius:999px; font-weight:700; cursor:pointer; }
    .btn.ghost{ background:transparent; color:#fff; }

    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:16px; }
    .card{ border:2px solid #fff; border-radius:14px; padding:14px; background:rgba(255,255,255,.06); box-shadow:0 10px 30px rgba(0,0,0,.5); }
    .card h3{ margin-bottom:8px; }
    .history{ max-height:220px; overflow:auto; display:flex; flex-direction:column; gap:8px; }
    .row{ display:flex; justify-content:space-between; align-items:center; font-size:13px; padding:8px; border:1px solid rgba(255,255,255,.2); border-radius:10px; }
    .code{ font-family:'Courier New',monospace; background:rgba(0,0,0,.5); padding:6px 10px; border-radius:8px; }

    @media (max-width: 860px){ .grid{ grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="overlay"></div>
  <div class="chrome">
    <button class="back" onclick="goHome()">‚üµ –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    <div class="title">–¢–∞–π–Ω–∞—è —Ä—É–ª–µ—Ç–∫–∞</div>
    <div style="width:90px"></div>
  </div>

  <div class="panel">
    <div class="ring" id="ring">
      <div class="items" id="ringItems"></div>
      <div class="pointer">‚ñ≤</div>
    </div>
    <div class="actions">
      <button class="btn" id="spinBtn">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
      <button class="btn ghost" onclick="goHome()">–ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    </div>

    <div class="grid">
      <div class="card">
        <h3>–ò—Å—Ç–æ—Ä–∏—è</h3>
        <div class="history" id="history"></div>
      </div>
      <div class="card">
        <h3>–ü—Ä–æ–º–æ–∫–æ–¥—ã</h3>
        <div class="history" id="codes"></div>
      </div>
    </div>
  </div>

  <script>
    // –ü–æ–º–µ—á–∞–µ–º –∫–µ–π—Å –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
    try{ window.opener?.markCaseUsed?.(); }catch(e){}
    try{ window.parent?.markCaseUsed?.(); }catch(e){}
    try{ window.markCaseUsed?.(); }catch(e){}

    const prizes = [
      { ico:'üëë', name:'–ü–æ–¥–ø–∏—Å–∫–∞ 1–º–µ—Å' },
      { ico:'üí∞', name:'–°–∫–∏–¥–∫–∞ 500‚ÇΩ' },
      { ico:'üíµ', name:'–°–∫–∏–¥–∫–∞ 100‚ÇΩ' },
      { ico:'ü™ô', name:'100 MULACOIN' },
      { ico:'ü™ô', name:'50 MULACOIN' },
      { ico:'üé∞', name:'+1 SPIN' },
      { ico:'üéØ', name:'+1 –∫–≤–µ—Å—Ç 24—á' }
    ];

    const items = document.getElementById('ringItems');
    const spinBtn = document.getElementById('spinBtn');
    const historyEl = document.getElementById('history');
    const codesEl = document.getElementById('codes');

    function buildItems(){
      items.innerHTML = '';
      const row = [];
      for(let r=0;r<12;r++){
        prizes.forEach(p=>row.push(p));
      }
      row.forEach(p=>{
        const d = document.createElement('div');
        d.className = 'item';
        d.innerHTML = `<div class="ico">${p.ico}</div><div class="lbl">${p.name}</div>`;
        items.appendChild(d);
      });
    }

    function rand(min,max){ return Math.random()*(max-min)+min; }

    function spin(){
      spinBtn.disabled = true;
      const base = 6000; // px
      const extra = rand(1000, 3000);
      const distance = base + extra;
      items.style.transform = `translateX(-${distance}px)`;
      setTimeout(()=>{
        spinBtn.disabled = false;
        const prize = prizes[Math.floor(rand(0, prizes.length))];
        pushHistory(prize);
        if(prize.name.includes('–°–∫–∏–¥–∫–∞') || prize.name.includes('–ü–æ–¥–ø–∏—Å–∫–∞')){
          addCode(prize);
        }
      }, 10000);
    }

    function pushHistory(p){
      const row = document.createElement('div');
      row.className = 'row';
      row.innerHTML = `<div>${p.ico} ${p.name}</div><div>${new Date().toLocaleString()}</div>`;
      historyEl.prepend(row);
    }

    function addCode(p){
      const code = `${p.name.replace(/\s+/g,'_').toUpperCase()}-${Math.random().toString(36).slice(2,7).toUpperCase()}`;
      const row = document.createElement('div');
      row.className = 'row';
      row.innerHTML = `<div>${p.ico} ${p.name}</div><div class="code">${code}</div>`;
      codesEl.prepend(row);
    }

    function goHome(){ window.location.href = './quests.html'; }

    buildItems();
    spinBtn.addEventListener('click', spin);
  </script>
</body>
</html>


