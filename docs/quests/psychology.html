<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üíÄ –ú–µ—Ç–æ–¥—ã –≠–ø—à—Ç–µ–π–Ω–∞ - –¢–∞–π–Ω–∞—è –ê–∫–∞–¥–µ–º–∏—è</title>
  <link rel="stylesheet" href="control-archives.css">
  <style>
    /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–≤–µ—Å—Ç–∞ "–ú–µ—Ç–æ–¥—ã –≠–ø—à—Ç–µ–π–Ω–∞" */
    .target-card {
      background: var(--glass);
      border-radius: var(--radius);
      padding: 25px;
      margin-bottom: 30px;
      text-align: center;
      position: relative;
      overflow: hidden;
      border: 2px solid var(--conspiracy);
    }

    .target-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(45deg, var(--conspiracy), var(--accent), var(--conspiracy));
      opacity: 0.1;
      animation: conspiracyGlow 3s ease-in-out infinite;
    }

    @keyframes conspiracyGlow {
      0%, 100% { opacity: 0.1; }
      50% { opacity: 0.3; }
    }

    .target-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin: 0 auto 16px;
      background: linear-gradient(135deg, var(--conspiracy), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      color: var(--bg0);
      box-shadow: 0 8px 25px var(--shadow-gold);
      position: relative;
      z-index: 2;
    }

    .target-name {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
      color: var(--conspiracy);
      position: relative;
      z-index: 2;
    }

    .target-description {
      font-size: 16px;
      color: var(--text-muted);
      margin-bottom: 20px;
      line-height: 1.5;
      position: relative;
      z-index: 2;
    }

    /* –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ü–µ–ª–∏ */
    .target-traits {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 25px;
      position: relative;
      z-index: 2;
    }

    .trait-item {
      background: var(--glass-strong);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 12px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .trait-item.vulnerable {
      border-color: var(--accent);
      background: linear-gradient(135deg, rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05));
    }

    .trait-label {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .trait-value {
      font-size: 16px;
      font-weight: 600;
      color: var(--text);
    }

    .trait-bar {
      width: 100%;
      height: 4px;
      background: var(--glass-strong);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }

    .trait-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--conspiracy), var(--accent));
      border-radius: 2px;
      transition: width 0.5s ease;
    }

    /* –°—Ü–µ–Ω–∞—Ä–∏–π –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è */
    .influence-container {
      background: var(--glass);
      border-radius: var(--radius);
      padding: 20px;
      margin-bottom: 25px;
      border: 1px solid var(--border);
    }

    .scenario-text {
      font-size: 18px;
      line-height: 1.6;
      color: var(--text);
      margin-bottom: 20px;
      text-align: center;
      font-style: italic;
    }

    /* –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Ö–Ω–∏–∫ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è */
    .technique-options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 20px;
    }

    .technique-option {
      background: var(--glass);
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      font-size: 16px;
      font-weight: 500;
      line-height: 1.4;
    }

    .technique-option:hover {
      border-color: var(--conspiracy);
      background: var(--glass-strong);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px var(--shadow-gold);
    }

    .technique-option.selected {
      border-color: var(--conspiracy);
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
      transform: scale(1.02);
    }

    .technique-type {
      display: inline-block;
      padding: 4px 8px;
      background: var(--accent);
      color: #ffffff;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      border-radius: 4px;
      margin-bottom: 8px;
    }

    /* –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è */
    .result-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .result-modal.show {
      display: flex;
    }

    .result-content {
      background: var(--glass);
      border-radius: var(--radius);
      padding: 30px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      border: 2px solid var(--conspiracy);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .result-icon {
      font-size: 48px;
      margin-bottom: 20px;
    }

    .result-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--conspiracy);
    }

    .influence-rate {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
      border: 1px solid rgba(255, 215, 0, 0.2);
      border-radius: var(--radius-sm);
      padding: 16px;
      margin-bottom: 25px;
    }

    .influence-rate-label {
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .influence-rate-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--conspiracy);
    }
  </style>
</head>
<body>
  <div class="quest-container">
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
    <div class="progress-indicator">
      <div class="progress-badge active">–°–µ–∞–Ω—Å 1 –∏–∑ 8</div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Ü–µ–ª–∏ -->
    <div class="target-card" id="targetCard">
      <div class="target-avatar" id="targetAvatar">üë§</div>
      <div class="target-name" id="targetName">–ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–ª–∏...</div>
      <div class="target-description" id="targetDescription">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>
      
      <div class="target-traits" id="targetTraits">
        <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- –°—Ü–µ–Ω–∞—Ä–∏–π –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="influence-container" id="influenceContainer">
      <div class="scenario-text" id="scenarioText">
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è...
      </div>
      
      <div class="technique-options" id="techniqueOptions">
        <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Ö–Ω–∏–∫ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <div class="quest-controls">
      <a href="../quests.html" class="btn ghost">‚Üê –ù–∞–∑–∞–¥ –∫ –∞—Ä—Ö–∏–≤–∞–º</a>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
  <div class="result-modal" id="resultModal">
    <div class="result-content">
      <div class="result-icon">üî∫</div>
      <h2 class="result-title">–¶–µ–ª—å –û–±—Ä–∞–±–æ—Ç–∞–Ω–∞!</h2>
      <p class="result-description">
        –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –¶–µ–ª—å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ç–µ–Ω–µ–≤–æ–≥–æ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞.
      </p>
      
      <div class="influence-rate">
        <div class="influence-rate-label">–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è</div>
        <div class="influence-rate-value" id="influenceRate">0%</div>
      </div>
      
      <div class="quest-rewards">
        <div class="reward-item">
          <div class="reward-amount" id="mulacoinReward">+0</div>
          <div class="reward-label">Mulacoin</div>
        </div>
        <div class="reward-item">
          <div class="reward-amount" id="expReward">+0</div>
          <div class="reward-label">–û–ø—ã—Ç–∞</div>
        </div>
      </div>
      
      <button class="btn primary" onclick="closeResultModal()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –û–ø–µ—Ä–∞—Ü–∏—é</button>
    </div>
  </div>

  <script>
    // –¶–µ–ª–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–≤—ã—Å–æ–∫–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω—ã)
    const TARGETS = [
      {
        id: 1,
        name: "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–æ–ª–∏—Ç–∏–Ω",
        description: "–ú—ç—Ä –∫—Ä—É–ø–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞",
        avatar: "üé©",
        baseTrait: "paranoia",
        baseTraitValue: 70,
        personality: "–û—Å—Ç–æ—Ä–æ–∂–Ω—ã–π –ø–æ–ª–∏—Ç–∏–∫, –±–æ–∏—Ç—Å—è –∫–æ–º–ø—Ä–æ–º–∞—Ç–∞ –∏ —Å–∫–∞–Ω–¥–∞–ª–æ–≤. –£—è–∑–≤–∏–º –∫ —É–≥—Ä–æ–∑–∞–º —Ä–µ–ø—É—Ç–∞—Ü–∏–∏.",
        profile: "–ü–∞—Ä–∞–Ω–æ–∏–¥–∞–ª—å–Ω—ã–π —Ç–∏–ø. –¢—Ä–µ–±—É–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤."
      },
      {
        id: 2,
        name: "–í–∏–∫—Ç–æ—Ä–∏—è –ú–µ–¥–∏–∞",
        description: "–¢–µ–ª–µ–≤–µ–¥—É—â–∞—è —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞",
        avatar: "üì∫",
        baseTrait: "narcissism",
        baseTraitValue: 60,
        personality: "–ê–º–±–∏—Ü–∏–æ–∑–Ω–∞—è –º–µ–¥–∏–∞–ø–µ—Ä—Å–æ–Ω–∞, –∂–∞–∂–¥–µ—Ç —Å–ª–∞–≤—ã –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è. –£—è–∑–≤–∏–º–∞ –∫ –ª–µ—Å—Ç–∏.",
        profile: "–ù–∞—Ä—Ü–∏—Å—Å–∏—á–µ—Å–∫–∏–π —Ç–∏–ø. –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –æ–±–µ—â–∞–Ω–∏—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞."
      },
      {
        id: 3,
        name: "–ú–∞–∫—Å–∏–º –ù–∞—Å–ª–µ–¥–Ω–∏–∫",
        description: "–°—ã–Ω –æ–ª–∏–≥–∞—Ä—Ö–∞",
        avatar: "üíé",
        baseTrait: "dependency",
        baseTraitValue: 80,
        personality: "–ò–∑–±–∞–ª–æ–≤–∞–Ω–Ω—ã–π –Ω–∞—Å–ª–µ–¥–Ω–∏–∫, –∏—â–µ—Ç –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç—ã. –£—è–∑–≤–∏–º –∫ —Å—Ç–∞—Ç—É—Å–Ω—ã–º –∏–≥—Ä–∞–º.",
        profile: "–ò–Ω—Ñ–∞–Ω—Ç–∏–ª—å–Ω—ã–π —Ç–∏–ø. –ù—É–∂–¥–∞–µ—Ç—Å—è –≤ –æ—Ç—Ü–æ–≤—Å–∫–∏—Ö —Ñ–∏–≥—É—Ä–∞—Ö –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ —ç–ª–∏—Ç–µ."
      },
      {
        id: 4,
        name: "–ê–Ω–Ω–∞ –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å",
        description: "–ñ–µ–Ω–∞ –±–∞–Ω–∫–∏—Ä–∞, –∞–∫—Ç–∏–≤–∏—Å—Ç–∫–∞",
        avatar: "üë∏",
        baseTrait: "social_pressure",
        baseTraitValue: 75,
        personality: "–°–æ—Ü–∏–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞—è, –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–Ω–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è. –£—è–∑–≤–∏–º–∞ –∫ –¥–∞–≤–ª–µ–Ω–∏—é.",
        profile: "–ó–∞–≤–∏—Å–∏–º—ã–π —Ç–∏–ø. –ë–æ–∏—Ç—Å—è –æ—Å—É–∂–¥–µ–Ω–∏—è, —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É –ø—Ä–∏–∑–Ω–∞–Ω–∏—é."
      },
      {
        id: 5,
        name: "–ì–µ–Ω–µ—Ä–∞–ª –§—ë–¥–æ—Ä–æ–≤",
        description: "–í–æ–µ–Ω–Ω—ã–π –≤ –æ—Ç—Å—Ç–∞–≤–∫–µ",
        avatar: "üéñÔ∏è",
        baseTrait: "authority",
        baseTraitValue: 65,
        personality: "–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –≤–æ–µ–Ω–Ω—ã–π, —Ü–µ–Ω–∏—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é. –£—è–∑–≤–∏–º –∫ –ø–∞—Ç—Ä–∏–æ—Ç–∏—á–µ—Å–∫–∏–º –º–æ—Ç–∏–≤–∞–º.",
        profile: "–ê–≤—Ç–æ—Ä–∏—Ç–∞—Ä–Ω—ã–π —Ç–∏–ø. –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–∏–ª—É, —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏ –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã."
      }
    ];

    // –°—Ü–µ–Ω–∞—Ä–∏–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è
    const SCENARIOS = [
      "–¶–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–Ω–æ–π –≤—Å—Ç—Ä–µ—á–µ. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏ –æ—Ü–µ–Ω–∏—Ç—å —É—è–∑–≤–∏–º–æ—Å—Ç–∏.",
      "–¶–µ–ª—å –ø—Ä–æ—è–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å. –£–≥–ª—É–±–ª—è–µ–º –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã.",
      "–¶–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–æ–≤–µ—Ä—è—Ç—å. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ—Ö–Ω–∏–∫–∏ —è–∫–æ—Ä–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.",
      "–¶–µ–ª—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤—É. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º.",
      "–¶–µ–ª—å –∫–æ–ª–µ–±–ª–µ—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Ö–Ω–∏–∫–∏ –¥–∞–≤–ª–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.",
      "–¶–µ–ª—å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ—Ç—Å—è. –ü—Ä–∏–º–µ–Ω—è–µ–º –±–æ–ª–µ–µ –∂–µ—Å—Ç–∫–∏–µ –º–µ—Ç–æ–¥—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏—è.",
      "–¶–µ–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–¥—á–∏–Ω—è—Ç—å—Å—è. –ó–∞–∫—Ä–µ–ø–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Å–æ–∑–¥–∞–µ–º –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.",
      "–§–∏–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞. –¶–µ–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏."
    ];

    // –¢–µ—Ö–Ω–∏–∫–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –ø–æ —Ç–∏–ø–∞–º –ª–∏—á–Ω–æ—Å—Ç–∏
    const TECHNIQUES = {
      paranoia: [
        {
          text: "–ü—Ä–µ–¥–ª–∞–≥–∞—é –≤–∑–∞–∏–º–æ–≤—ã–≥–æ–¥–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —Å –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏",
          type: "–î–û–í–ï–†–ò–ï",
          effectiveness: 85
        },
        {
          text: "–£ –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–∏—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞—Ö. –ú–æ–∂–µ–º –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∑–∞—â–∏—Ç—É",
          type: "–ó–ê–©–ò–¢–ê",
          effectiveness: 75
        },
        {
          text: "–í–∞—à–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥ —É–≥—Ä–æ–∑–æ–π. –¢–æ–ª—å–∫–æ –º—ã –º–æ–∂–µ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
          type: "–£–ì–†–û–ó–ê",
          effectiveness: 60
        },
        {
          text: "–í—Å–µ –≤–ª–∏—è—Ç–µ–ª—å–Ω—ã–µ –ª—é–¥–∏ —É–∂–µ —Å –Ω–∞–º–∏. –ù–µ –æ—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –≤ —Å—Ç–æ—Ä–æ–Ω–µ",
          type: "–ò–ó–û–õ–Ø–¶–ò–Ø",
          effectiveness: 40
        }
      ],
      narcissism: [
        {
          text: "–¢–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ –≤–∞—à–µ–≥–æ —É—Ä–æ–≤–Ω—è —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–Ω—è—Ç—å –º–∞—Å—à—Ç–∞–± –Ω–∞—à–∏—Ö –ø–ª–∞–Ω–æ–≤",
          type: "–õ–ï–°–¢–¨",
          effectiveness: 90
        },
        {
          text: "–≠—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –∏–∑–±—Ä–∞–Ω–Ω—ã–º –ø–µ—Ä—Å–æ–Ω–∞–º",
          type: "–≠–ö–°–ö–õ–Æ–ó–ò–í",
          effectiveness: 80
        },
        {
          text: "–í–∞—à–µ —É—á–∞—Å—Ç–∏–µ –æ–±–µ—Å–ø–µ—á–∏—Ç –≤–∞–º –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ",
          type: "–°–¢–ê–¢–£–°",
          effectiveness: 70
        },
        {
          text: "–ë–µ–∑ –≤–∞—Å –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å –Ω—É–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è",
          type: "–ù–ï–ó–ê–ú–ï–ù–ò–ú–û–°–¢–¨",
          effectiveness: 50
        }
      ],
      dependency: [
        {
          text: "–ü–æ–∑–≤–æ–ª—å—Ç–µ –º–Ω–µ —Å—Ç–∞—Ç—å –≤–∞—à–∏–º –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º –≤ —ç—Ç–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö",
          type: "–ü–û–ö–†–û–í–ò–¢–ï–õ–¨–°–¢–í–û",
          effectiveness: 85
        },
        {
          text: "–í—Å–µ —Å–µ—Ä—å–µ–∑–Ω—ã–µ –ª—é–¥–∏ –≤–∞—à–µ–≥–æ –∫—Ä—É–≥–∞ —É–∂–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª–∏—Å—å –∫ –Ω–∞–º",
          type: "–ü–†–ò–ù–ê–î–õ–ï–ñ–ù–û–°–¢–¨",
          effectiveness: 80
        },
        {
          text: "–ú—ã –æ–±–µ—Å–ø–µ—á–∏–º –≤–∞–º –º–µ—Å—Ç–æ –≤ –≤—ã—Å—à–µ–º –æ–±—â–µ—Å—Ç–≤–µ",
          type: "–°–¢–ê–¢–£–°",
          effectiveness: 75
        },
        {
          text: "–î–æ–≤–µ—Ä—å—Ç–µ—Å—å –º–Ω–µ, —è –∑–Ω–∞—é —á—Ç–æ –¥–ª—è –≤–∞—Å –ª—É—á—à–µ",
          type: "–ê–í–¢–û–†–ò–¢–ï–¢",
          effectiveness: 60
        }
      ],
      social_pressure: [
        {
          text: "–í—Å–µ —É–≤–∞–∂–∞–µ–º—ã–µ –ª—é–¥–∏ –≤–∞—à–µ–≥–æ –∫—Ä—É–≥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —ç—Ç—É –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É",
          type: "–ö–û–ù–§–û–†–ú–ò–ó–ú",
          effectiveness: 85
        },
        {
          text: "–û–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–æ –æ—Ü–µ–Ω–∏—Ç –≤–∞—à–µ —É—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ",
          type: "–ü–†–ò–ó–ù–ê–ù–ò–ï",
          effectiveness: 75
        },
        {
          text: "–ù–µ—É—á–∞—Å—Ç–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω–æ –æ–±—â–µ—Å—Ç–≤–æ–º",
          type: "–û–°–£–ñ–î–ï–ù–ò–ï",
          effectiveness: 70
        },
        {
          text: "–í–∞—à–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –≤—ã–∏–≥—Ä–∞–µ—Ç –æ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ —Å –Ω–∞–º–∏",
          type: "–†–ï–ü–£–¢–ê–¶–ò–Ø",
          effectiveness: 60
        }
      ],
      authority: [
        {
          text: "–≠—Ç–æ —Å–ª—É–∂–µ–Ω–∏–µ –≤—ã—Å—à–∏–º –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–∞–º —Å—Ç—Ä–∞–Ω—ã",
          type: "–ü–ê–¢–†–ò–û–¢–ò–ó–ú",
          effectiveness: 90
        },
        {
          text: "–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π –ø–æ—Ä—è–¥–æ–∫",
          type: "–ü–û–†–Ø–î–û–ö",
          effectiveness: 80
        },
        {
          text: "–£–≤–∞–∂–∞–µ–º—ã–µ –≤–æ–µ–Ω–Ω—ã–µ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–∞—Å",
          type: "–ê–í–¢–û–†–ò–¢–ï–¢",
          effectiveness: 70
        },
        {
          text: "–¢–æ–ª—å–∫–æ —Å–∏–ª—å–Ω—ã–µ –ª—é–¥–∏ —Å–ø–æ—Å–æ–±–Ω—ã –ø—Ä–∏–Ω—è—Ç—å —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ",
          type: "–°–ò–õ–ê",
          effectiveness: 65
        }
      ]
    };

    // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    let currentTarget = null;
    let currentSession = 0;
    let targetTraits = {
      resistance: 50,
      trust: 30,
      compliance: 20,
      dependency: 10
    };
    let selectedTechniques = [];
    let totalEffectiveness = 0;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    function init() {
      // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Ü–µ–ª—å
      currentTarget = TARGETS[Math.floor(Math.random() * TARGETS.length)];
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
      targetTraits.resistance = currentTarget.baseTraitValue;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª—å
      showTarget();
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—ã–π —Å–µ–∞–Ω—Å
      loadSession(0);
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ü–µ–ª–∏
    function showTarget() {
      document.getElementById('targetAvatar').textContent = currentTarget.avatar;
      document.getElementById('targetName').textContent = currentTarget.name;
      document.getElementById('targetDescription').innerHTML = `
        <strong>${currentTarget.personality}</strong><br>
        <em>–ü—Ä–æ—Ñ–∏–ª—å: ${currentTarget.profile}</em>
      `;
      
      updateTraitsDisplay();
    }

    // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
    function updateTraitsDisplay() {
      const traitsContainer = document.getElementById('targetTraits');
      traitsContainer.innerHTML = '';
      
      const traitNames = {
        resistance: '–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ',
        trust: '–î–æ–≤–µ—Ä–∏–µ',
        compliance: '–ü–æ–¥—á–∏–Ω–µ–Ω–∏–µ',
        dependency: '–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å'
      };
      
      Object.entries(targetTraits).forEach(([trait, value]) => {
        const traitItem = document.createElement('div');
        traitItem.className = `trait-item ${value > 70 ? 'vulnerable' : ''}`;
        
        traitItem.innerHTML = `
          <div class="trait-label">${traitNames[trait]}</div>
          <div class="trait-value">${value}%</div>
          <div class="trait-bar">
            <div class="trait-fill" style="width: ${value}%"></div>
          </div>
        `;
        
        traitsContainer.appendChild(traitItem);
      });
    }

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ–∞–Ω—Å
    function loadSession(session) {
      currentSession = session;
      
      // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
      const progressBadge = document.querySelector('.progress-badge');
      progressBadge.textContent = `–°–µ–∞–Ω—Å ${session + 1} –∏–∑ 8`;
      
      // –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π
      document.getElementById('scenarioText').textContent = SCENARIOS[session];
      
      // –°–æ–∑–¥–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Ö–Ω–∏–∫
      createTechniqueOptions();
    }

    // –°–æ–∑–¥–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Ö–Ω–∏–∫ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è
    function createTechniqueOptions() {
      const container = document.getElementById('techniqueOptions');
      container.innerHTML = '';
      
      const availableTechniques = TECHNIQUES[currentTarget.baseTrait];
      
      availableTechniques.forEach((technique, index) => {
        const button = document.createElement('button');
        button.className = 'technique-option';
        button.innerHTML = `
          <div class="technique-type">${technique.type}</div>
          ${technique.text}
        `;
        button.onclick = () => selectTechnique(index, technique);
        container.appendChild(button);
      });
    }

    // –í—ã–±—Ä–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫—É
    function selectTechnique(index, technique) {
      // –£–±—Ä–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
      document.querySelectorAll('.technique-option').forEach(btn => {
        btn.classList.remove('selected');
      });
      
      // –í—ã–¥–µ–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
      event.target.classList.add('selected');
      
      // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–µ—Ö–Ω–∏–∫–∏
      applyTechniqueEffects(technique);
      
      // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É
      selectedTechniques.push({
        session: currentSession,
        technique: technique.text,
        type: technique.type,
        effectiveness: technique.effectiveness
      });
      
      // –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–µ–∞–Ω—Å—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
      setTimeout(() => {
        if (currentSession < 7) {
          loadSession(currentSession + 1);
        } else {
          completeOperation();
        }
      }, 2000);
    }

    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã —Ç–µ—Ö–Ω–∏–∫–∏
    function applyTechniqueEffects(technique) {
      const effectiveness = technique.effectiveness;
      
      // –ò–∑–º–µ–Ω—è–µ–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
      if (effectiveness > 80) {
        targetTraits.resistance = Math.max(0, targetTraits.resistance - 15);
        targetTraits.trust = Math.min(100, targetTraits.trust + 20);
        targetTraits.compliance = Math.min(100, targetTraits.compliance + 15);
        targetTraits.dependency = Math.min(100, targetTraits.dependency + 10);
      } else if (effectiveness > 60) {
        targetTraits.resistance = Math.max(0, targetTraits.resistance - 10);
        targetTraits.trust = Math.min(100, targetTraits.trust + 15);
        targetTraits.compliance = Math.min(100, targetTraits.compliance + 10);
        targetTraits.dependency = Math.min(100, targetTraits.dependency + 8);
      } else {
        targetTraits.resistance = Math.max(0, targetTraits.resistance - 5);
        targetTraits.trust = Math.min(100, targetTraits.trust + 8);
        targetTraits.compliance = Math.min(100, targetTraits.compliance + 5);
        targetTraits.dependency = Math.min(100, targetTraits.dependency + 3);
      }
      
      totalEffectiveness += effectiveness;
      updateTraitsDisplay();
    }

    // –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
    function completeOperation() {
      // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è
      const influenceRate = Math.round(totalEffectiveness / 8);
      
      // –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
      const mulacoinReward = Math.round(influenceRate / 15) + 2; // 2-8 mulacoin
      const expReward = Math.round(influenceRate * 3) + 100; // 100-400 –æ–ø—ã—Ç–∞
      
      // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
      document.getElementById('influenceRate').textContent = `${influenceRate}%`;
      document.getElementById('mulacoinReward').textContent = `+${mulacoinReward}`;
      document.getElementById('expReward').textContent = `+${expReward}`;
      
      // –ù–∞—á–∏—Å–ª–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—ã
      if (window.parent && window.parent.addRewards) {
        window.parent.addRewards(mulacoinReward, expReward, 'psychology', '–ú–µ—Ç–æ–¥—ã –≠–ø—à—Ç–µ–π–Ω–∞', 'medium');
      }
      
      // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      document.getElementById('resultModal').classList.add('show');
    }

    // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    function closeResultModal() {
      document.getElementById('resultModal').classList.remove('show');
      window.location.href = '../quests.html';
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
